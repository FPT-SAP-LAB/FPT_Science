
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    System.Resources.ResourceManager rm = GUEST.Models.LanguageResource.GetResourceManager();
}
<style>
    .border-side-1 {
        border-left: 7px solid #0094ff !important;
    }
    .border-side-2 {
        border-left: 7px solid #ff6a00 !important;
    }
    .border-side-3 {
        border-left: 7px solid #39a73b !important;
    }
    .border-side-4 {
        border-left: 7px solid #b200ff !important;
    }
    #check-box-1 {
        background-color: #0094ff !important;
    }
    #check-box-2 {
        background-color: #ff6a00 !important;
    }
    #check-box-3 {
        background-color: #39a73b !important;
    }
    #check-box-4 {
        background-color: #b200ff !important;
    }
    .font-content {
        font-size: 14px !important;
    }

    .cs-pd {
        padding: 1rem 1rem !important;
    }
    #custom-zone .custom-checkbox {
        outline: none !important;
        cursor: default !important;
    }

    #custom-zone .checkbox {
        margin-right: 0px !important;
    }

    #custom-zone a {
        color: #3F4254 !important;
    }
</style>



<div class="card-body pb-0">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="card card-custom gutter-b card-stretch">
                <div class="card-body d-flex flex-column rounded justify-content-between cs-pd">
                    <div class="row" id="custom-zone">
                        <div id="list-type" class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            @foreach (var t in ViewBag.listActivityType) {
                            <div id="@t.activity_type_id" class="activity-type col-sm-2 col-md-2 col-lg-2 col-xl-2 float-left">
                                <div class="checkbox-inline mt-3">
                                    <label class="checkbox">
                                        <input id="check-box-@t.activity_type_id" type="checkbox" />
                                        <span id="check-box-@t.activity_type_id" class="custom-checkbox"></span>
                                    </label>
                                    <span><a href="javascript:;">@t.activity_type_name</a></span>
                                </div>
                            </div>
                             }
                            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 float-left">
                                <div class="input-icon">
                                    <input id="search" type="text" class="form-control" placeholder="@rm.GetString("Search")" />
                                    <span><i class="flaticon2-search-1 text-muted"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card-body">
    <div class="row" id="content-control">
        @foreach (var item in ViewBag.listActivity)
        {
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 min-h-200px">
                <div class="card card-custom gutter-b card-stretch">
                    <div class="card-body d-flex flex-column rounded bg-light justify-content-between border-side-@item.activity_type_id">
                        <div class="font-content">
                            <h4 class="font-size-h4">
                                <a href="javascript:;" onclick="goDetail(@item.activity_id)" class="text-dark-75 font-weight-bolder">@item.activity_name</a>
                            </h4>
                            <div class="">
                                @rm.GetString("Time"): @item.from - @item.to
                            </div>
                            <div class="">
                                @rm.GetString("Location"): @item.location
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 text-center my-5 py-3">
            <a id="load-more" class="btn btn-sm btn-light-primary font-weight-bold px-6">@rm.GetString("LoadMore")</a>
        </div>
    </div>

    <!--<div class="example-preview float-right">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
            <div class="d-flex flex-wrap py-2 mr-3">-->
    @*<a href="javascript:;" class="btn btn-icon btn-sm btn-light mr-2 my-1">
            <i class="ki ki-bold-double-arrow-back icon-xs"></i>
        </a>
        <a href="javascript:;" class="btn btn-icon btn-sm btn-light mr-2 my-1">
            <i class="ki ki-bold-arrow-back icon-xs"></i>
        </a>*@
    <!--<a href="javascript:;" class="btn btn-icon border-0 btn-light mr-2 my-1 btn-hover-primary active">1</a>
                <a href="javascript:;" class="btn btn-icon border-0 btn-light mr-2 my-1">2</a>
                <a href="javascript:;" class="btn btn-icon border-0 btn-light mr-2 my-1">3</a>
                <a href="javascript:;" class="btn btn-icon border-0 btn-light mr-2 my-1">4</a>
                <a href="javascript:;" class="btn btn-icon border-0 btn-light mr-2 my-1">5</a>
                <a href="javascript:;" class="btn btn-icon btn-light mr-2 my-1">
                    <i class="ki ki-bold-arrow-next icon-xs"></i>
                </a>
                <a href="javascript:;" class="btn btn-icon btn-sm btn-light mr-2 my-1">
                    <i class="ki ki-bold-double-arrow-next icon-xs"></i>
                </a>
            </div>
        </div>
    </div>-->
</div>

@section scripts{
    <script>
        function goDetail(id) {
            window.location.href = 'Detail?id=' + id;
        }
    </script>
    <script>

        $(document).ready(function () {
            var count = 0;
            var type = [];
            $('#list-type').children().eq($('#list-type').children().length - 2).children().removeClass("mt-3");
            $('#search').keypress(function (e) {
                var key = e.which;
                if (key == 13)  // the enter key code
                {
                    var search = $('#search').val();
                    $.ajax({
                    url: "@Url.Action("LoadMoreList", "AcademicActivity")",
                    method: "POST",
                    datatype: "json",
                    cache: false,
                    data: {
                        count: count,
                        type: type,
                        search: search
                    },
                    success: function (data) {
                        var temp = "";
                        $(data).each(function (i, item) {
                            temp += `<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 min-h-200px">
            <div class="card card-custom gutter-b card-stretch">
                <div class="card-body d-flex flex-column rounded bg-light justify-content-between border-side-`+ item.activity_type_id +`">
                    <div class="font-content">
                        <h4 class="font-size-h4">
                            <a href="goDetail(`+ item.activity_id +`)" class="text-dark-75 font-weight-bolder">`+ item.activity_name + `</a>
                        </h4>
                        <div class="">
                            Thời gian: `+ item.from + ` - ` + item.to + `
                        </div>
                        <div class="">
                            Địa điểm: `+ item.location + `
                        </div>
                    </div>
                </div>
            </div>
                    </div>`
                        });
                        $('#content-control').html(temp);
                        if ($(data).length < 6) {
                            $('#load-more').hide();
                        }
                    }
                });
                }
            });
            $('.activity-type').click(function () {
                count = 0;
                var id = $(this).attr('id');
                    var check = false;
                    for (var i = 0; i < type.length; i++) {
                        if (type[i] == id) {
                            check = true;
                            type.splice(i, 1);
                            $('#check-box-' + id).prop('checked', false);
                            break;
                        }
                    }
                    if (!check) {
                        type.push(id);
                        $('#check-box-' + id).prop('checked', true);
                    }



                $.ajax({
                    url: "@Url.Action("LoadMoreList", "AcademicActivity")",
                    method: "POST",
                    datatype: "json",
                    cache: false,
                    data: {
                        count: count,
                        type: type
                    },
                    success: function (data) {
                        var temp = "";
                        $(data).each(function (i, item) {
                            temp += `<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 min-h-200px">
            <div class="card card-custom gutter-b card-stretch">
                <div class="card-body d-flex flex-column rounded bg-light justify-content-between border-side-`+ item.activity_type_id +`">
                    <div class="font-content">
                        <h4 class="font-size-h4">
                            <a href="goDetail(`+ item.activity_id +`)" class="text-dark-75 font-weight-bolder">`+ item.activity_name + `</a>
                        </h4>
                        <div class="">
                            Thời gian: `+ item.from + ` - ` + item.to + `
                        </div>
                        <div class="">
                            Địa điểm: `+ item.location + `
                        </div>
                    </div>
                </div>
            </div>
                    </div>`
                        });
                        $('#content-control').html(temp);
                        if (data.length == 6) {
                            $('#load-more').show();
                        } else {
                            $('#load-more').hide();
                        }
                    }
                })
            });
            $('#load-more').click(function () {
                count++;
            $.ajax({
                    url: "@Url.Action("LoadMoreList", "AcademicActivity")",
                    method: "POST",
                    datatype: "json",
                    cache: false,
                    data: {
                        count: count,
                        type: type
                    },
                    success: function (data) {
                        var temp = "";
                        $(data).each(function (i, item) {
                            temp += `<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 min-h-200px">
            <div class="card card-custom gutter-b card-stretch">
                <div class="card-body d-flex flex-column rounded bg-light justify-content-between border-side-`+ item.activity_type_id +`">
                    <div class="font-content">
                        <h4 class="font-size-h4">
                            <a href="goDetail(`+ item.activity_id +`)" class="text-dark-75 font-weight-bolder">`+ item.activity_name + `</a>
                        </h4>
                        <div class="">
                            Thời gian: `+ item.from + ` - ` + item.to + `
                        </div>
                        <div class="">
                            Địa điểm: `+ item.location + `
                        </div>
                    </div>
                </div>
            </div>
                    </div>`
                        });
                        $(temp).hide().appendTo($("#content-control")).slideDown(1000);
                        if ($(data).length < 6) {
                            $('#load-more').hide();
                        }
                    }
                });
            return false;
        })
        })


    </script>
}